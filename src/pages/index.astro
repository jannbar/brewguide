---
import { getCollection } from "astro:content"

import Container from "../components/Container.astro"
import Layout from "../layouts/Layout.astro"
import Recipe from "../components/Recipe.astro"
import { Nav } from "../components/Nav"

const allRecipes = await getCollection("recipes")

const navOptions = allRecipes.map((recipe) => ({
  value: recipe.slug,
  label: recipe.data.title,
}))
---

<Layout>
  <Container>
    <header class="my-8 flex items-center justify-between">
      <h1 class="text-2xl font-bold">Brewguide</h1>
      <a
        class="inline-flex items-center rounded-md bg-emerald-600 px-3 py-2 text-sm font-bold text-white transition-colors hover:bg-emerald-700"
        href="https://open.spotify.com/playlist/7aOX137yLhicZzbshZ1jfw?si=09c3458213604328"
        target="_blank"
      >
        Playlist
      </a>
    </header>

    <Nav options={navOptions} client:load />

    <div class="space-y-8 pb-16">
      {allRecipes.map((recipe) => <Recipe recipe={recipe} />)}
    </div>
  </Container>
</Layout>
